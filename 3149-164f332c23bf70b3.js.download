"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3149],{15043:function(e,n,t){t.d(n,{_d:function(){return f},bg:function(){return p},fP:function(){return v}});var r=t(26042),i=t(7297),l=t(31230),o=t(54595),a=t(50319);function s(){var e=(0,i.Z)(["\n  fragment TipReplFragment on Repl {\n    id\n    url\n    user {\n      id\n    }\n    totalCyclesTips\n    currentUserTotalTips\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment TipThemeFragment on CustomTheme {\n    id\n    slug\n    author {\n      id\n    }\n    totalCyclesTips\n    currentUserTotalTips\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation TipSendTip($input: SendTipInput!) {\n    sendTip(input: $input) {\n      ... on UserError {\n        __typename\n        message\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on SendTipResult {\n        __typename\n        repl {\n          id\n          ...TipReplFragment\n          ...TopTipperReplLeaderboard\n        }\n        theme {\n          id\n          ...TipThemeFragment\n          ...TopTipperThemeLeaderboard\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return e},e}var d={},p=(0,l.Ps)(s()),f=(0,l.Ps)(u()),h=(0,l.Ps)(c(),p,o.pT,f,o.h1);function v(e){var n=(0,r.Z)({},d,e);return a.D(h,n)}},92600:function(e,n,t){t.d(n,{R1:function(){return v},SI:function(){return w},ir:function(){return b},rd:function(){return g}});var r=t(26042),i=t(7297),l=t(31230),o=t(15043),a=t(54595),s=t(37887);function u(){var e=(0,i.Z)(['\n  fragment IsTippingAvailableForRecipient on User {\n    id\n    hasPrivacyRole\n    isVerified\n    isGated: gate(feature: "flag-tip-repl")\n  }\n']);return u=function(){return e},e}function c(){var e=(0,i.Z)(["\n  fragment TipSurfaceOwnerFragment on User {\n    id\n    username\n    ...IsTippingAvailableForRecipient\n  }\n  ","\n"]);return c=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment IsTippingAvailableForSender on CurrentUser {\n    id\n    hasPrivacyRole\n    isVerified\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query TipRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        user {\n          ... on User {\n            id\n            ...TipSurfaceOwnerFragment\n          }\n        }\n        ...TipReplFragment\n        ...TopTipperReplLeaderboard\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,i.Z)(["\n  query TipTheme($input: CustomThemeByIdInput!) {\n    customThemeById(input: $input) {\n      ... on CustomTheme {\n        author {\n          ... on User {\n            id\n            ...TipSurfaceOwnerFragment\n          }\n        }\n        ...TipThemeFragment\n        ...TopTipperThemeLeaderboard\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return f=function(){return e},e}var h={},v=(0,l.Ps)(u()),m=(0,l.Ps)(c(),v),g=(0,l.Ps)(d()),Z=(0,l.Ps)(p(),m,o.bg,a.pT,g);function w(e){var n=(0,r.Z)({},h,e);return s.a(Z,n)}var y=(0,l.Ps)(f(),m,o._d,a.h1,g);function b(e){var n=(0,r.Z)({},h,e);return s.a(y,n)}},90024:function(e,n,t){t.d(n,{Z:function(){return O},L:function(){return N}});var r=t(14924),i=t(10253),l=t(35944),o=t(15085),a=t(38164),s=t(77365),u=t(29815),c=t(15043),d=t(20861),p=t(9614),f=t(67294),h=t(93058),v=t(30439),m=t(60977),g=t(70917),Z=t(85485),w=t(81456),y=(0,g.F4)({"0%":{width:"100%"},"100%":{width:"0%"}}),b=function(e){var n=e.tipAmount,t=e.onUndo,i=e.show,s=e.undoTime;return i?(0,l.BX)(o.Tg,{css:[o.l0.position.fixed,o.l0.bottom(24),o.l0.right(24),o.l0.zIndex(100),o.l0.borderRadius(8),o.l0.backgroundColor.accentPrimaryDimmer,o.l0.cursor.pointer,o.l0.overflow("hidden"),(0,r.Z)({},(0,Z.EM)("mobileMax"),[o.l0.bottom(16),o.l0.left(16),o.l0.width("calc(100% - 32px)")])],onClick:t,children:[(0,l.BX)(o.G7,{css:[o.l0.pb(24),o.l0.pt(12),o.l0.px(12),o.l0.zIndex(2),o.l0.rowWithGap(48),o.l0.align.center,o.l0.justify.spaceBetween],children:[(0,l.BX)(o.G7,{css:[o.l0.colWithGap(8)],children:[(0,l.tZ)(o.xv,{variant:"subheadBig",children:"Woohoo!"}),(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(2),o.l0.align.center],children:[(0,l.tZ)(o.xv,{children:"You just tipped"}),(0,l.tZ)(a.Z,{size:16}),(0,l.BX)(o.xv,{children:[" ","".concat((0,w.d)(n))]})]})]}),(0,l.tZ)(o.G7,{css:[o.l0.colWithGap(4),o.l0.align.end],children:(0,l.tZ)(o.xv,{multiline:!0,css:[o.l0.textAlign.center,o.l0.fontWeight.medium,o.l0.pt(4)],children:"Cancel Tip"})})]}),(0,l.tZ)(o.G7,{css:[o.l0.height(6),o.l0.position.absolute,o.l0.bottom(0),o.l0.left(0),o.l0.right(24),o.l0.zIndex(1),o.l0.backgroundColor.accentPrimaryDefault,{animation:"".concat(y," ").concat(s+100,"ms linear")}]})]}):null},T=t(98146),R=t(42895),x=t(91131),k=(0,x.cn)("ready"),C={query:p.s8},U={query:v.BW},P=(0,g.F4)({"10%":{transform:"translate3d(-1px, 0, 0)"},"20%":{transform:"translate3d(2px, 0, 0)"},"30%":{transform:"translate3d(-4px, 0, 0)"},"50%":{transform:"translate3d(-4px, 0, 0)"},"70%":{transform:"translate3d(-4px, 0, 0)"},"80%":{transform:"translate3d(2px, 0, 0)"},"40%":{transform:"translate3d(4px, 0, 0)"},"60%":{transform:"translate3d(4px, 0, 0)"},"90%":{transform:"translate3d(-1px, 0, 0)"}}),S=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};function E(e){var n,t,s=e.tipAmount,p=e.icon,v=e.currentUser,g=e.tipTarget,Z=g.id,y=g.type,E=g.slug,I=g.owner.id,F=(0,i.Z)((0,x.KO)(k),2),B=F[0],_=F[1],G=(0,h.Z)().showError,D=(0,f.useRef)(void 0),N=(0,f.useState)(!1),L=N[0],V=N[1],A=(0,d.Z)({forceFetch:!1}).cycles,X=(0,T.$0)().fireCircularBurstFrom,O=(0,f.useRef)(null),j=(0,R.T)(),W=(0,f.useState)(!1),z=W[0],M=W[1],H="repl"===y?"replId":"themeId",q=(0,i.Z)((0,c.fP)({onError:function(e){return G(e)},onCompleted:function(e){_("ready"),"SendTipResult"!==e.sendTip.__typename&&(e.sendTip.message?G(e.sendTip.message):G("Something went wrong"))},refetchQueries:[C,U]}),2),$=q[0],Y=q[1].loading,K="ready"===B&&!!(null===v||void 0===v?void 0:v.isVerified)&&v.id!==I&&!Y&&!L;K?(n=s>=1e3?"Super-donor \u2014 ":s>=500?"Benefactor \u2014 ":"Supporter \u2014\xa0",n+="Tip this ".concat(S(y)," to show your support for @").concat(g.owner.username)):v&&!v.isVerified?n="You must be verified to tip":v&&v.id===I?n="You cannot tip your own ".concat(S(y)):v||(n="You must be logged in to tip"),t=Y||L?(0,l.tZ)(l.HY,{children:"Sending\u2026"}):(0,l.BX)(o.G7,{css:[o.l0.colWithGap(8)],children:[(0,l.tZ)(o.xv,{variant:"subheadBig",children:p}),(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(2),o.l0.align.center],children:[(0,l.tZ)(o.xv,{css:[o.l0.pr(4)],children:"Tip"}),(0,l.tZ)(a.Z,{size:16}),(0,l.tZ)(o.xv,{children:"".concat((0,w.d)(s))})]})]});var Q=(0,l.tZ)(o.G7,{innerRef:O,css:(0,u.Z)(z?[{animation:"".concat(P," 1s"),"animation-iteration-count":1,"transition-timing-function":"cubic-bezier(0.4, 0, 0.2, 1)"}]:[]),onAnimationEnd:function(){M(!1)},children:(0,l.tZ)(o.u,{delay:500,tooltip:n,placement:"top",isDisabled:Y||L,children:(0,l.tZ)(o.zx,{disabled:!K,css:[o.l0.px(12),o.l0.py(8),o.l0.height(72),o.l0.width(96)],onClick:function(){K&&function(){if(K){var e,n;if((0,m.j)(m.U3.TIP_USED,(e={action:"tip-send-requested"},(0,r.Z)(e,y,E),(0,r.Z)(e,"tipTargetType",y),(0,r.Z)(e,"amount",s),e)),!A||s>A)return _("insufficientBalance"),void(0,m.j)(m.U3.TIP_USED,(n={action:"insufficient-balance"},(0,r.Z)(n,y,E),(0,r.Z)(n,"tipTargetType",y),(0,r.Z)(n,"amount",s),n));_("sending"),O.current&&!j&&X({element:O.current}),V(!0),D.current=setTimeout((function(){V(!1),$({variables:{input:(0,r.Z)({amount:s},H,Z)}})}),5e3)}}()},text:t})})});return(0,l.BX)(l.HY,{children:[Q,(0,l.tZ)(b,{tipAmount:s,undoTime:5e3,show:L,onUndo:function(){var e;(0,m.j)(m.U3.TIP_USED,(e={action:"tip-undone"},(0,r.Z)(e,y,E),(0,r.Z)(e,"tipTargetType",y),(0,r.Z)(e,"amount",s),e)),clearTimeout(D.current),M(!0),V(!1),_("ready")}})]})}var I=t(92600),F=t(94718),B=t(82447),_=function(e){var n=e.topTippers;return(0,l.BX)(o.G7,{css:[o.l0.colWithGap(16)],children:[(0,l.tZ)(o.xv,{variant:"subheadDefault",children:"Supporters Leaderboard"}),(0,l.tZ)(o.G7,{css:[o.l0.flex.column],children:n.map((function(e,n){var t=e.user,r=e.totalCyclesTipped;return t?(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.align.center],children:[(0,l.tZ)(o.xv,{css:[o.l0.fontWeight.medium],children:n+1}),(0,l.tZ)(F.Z,{username:t.username,children:(0,l.tZ)(B.ZP,{user:t,children:(0,l.tZ)(o.G7,{css:[o.l0.cursor.pointer,o.l0.colWithGap(8),o.l0.align.center,o.l0.borderRadius(8),o.l0.px(16),o.l0.py(12),{":hover":{backgroundColor:o.TV.backgroundHigher}}],children:(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(48),o.l0.align.center],children:[(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.align.center,o.l0.width(150)],children:[(0,l.tZ)(o.qE,{src:t.image,username:t.username,size:32,layout:"intrinsic"}),(0,l.tZ)(o.xv,{children:t.username})]}),(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(2),o.l0.pl(4),o.l0.align.center],children:[(0,l.tZ)(a.Z,{size:16}),(0,l.BX)(o.xv,{children:[" ","".concat((0,w.d)(r))]})]})]})})})})]},n):null}))})]})},G=function(e){var n=e.tipTarget,t=n.topTippers,i=n.type,s=n.slug,u=n.totalCyclesTips,c=(0,f.useState)(!1),d=c[0],p=c[1],h=t[0],v=h.user,g=h.totalCyclesTipped;if(!v)return null;var Z=(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.align.center,o.l0.backgroundColor.backgroundDefault],children:[(0,l.tZ)(o.qE,{src:v.image,username:v.username,size:24,layout:"intrinsic"}),(0,l.tZ)(o.xv,{children:v.username}),(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(2),o.l0.pl(4),o.l0.align.center],children:[(0,l.tZ)(a.Z,{size:16}),(0,l.BX)(o.xv,{children:[" ","".concat((0,w.d)(g))]})]})]}),y=1===t.length?Z:(0,l.tZ)(o.u,{tooltip:"See the leaderboard of the best supporters",children:(0,l.tZ)(o.G7,{onClick:function(){var e;p(!0),(0,m.j)(m.U3.TIP_USED,(e={action:"leaderboard-opened"},(0,r.Z)(e,i,s),(0,r.Z)(e,"tipTargetType",i),(0,r.Z)(e,"amount",u),e))},css:[o.l0.cursor.pointer],children:Z})});return(0,l.BX)(l.HY,{children:[y,(0,l.tZ)(o.u_,{isOpen:d,onRequestClose:function(){return p(!1)},children:(0,l.tZ)(o.G7,{css:[o.l0.px(8),o.l0.py(4)],children:(0,l.tZ)(_,{topTippers:t})})})]})},D=t(72533),N=function(e){var n=e.replOwner,t=e.currentUser;return!(!n||!n.isVerified||n.hasPrivacyRole||!n.isGated)&&!(null===t||void 0===t?void 0:t.hasPrivacyRole)},L={tips:[o.l0.py(8),o.l0.rowWithGap(32),(0,g.iv)((0,r.Z)({},(0,Z.EM)("tabletMin"),[o.l0.colWithGap(16)])),o.l0.align.center],tipSection:[o.l0.colWithGap(8)],tipSectionTitle:[o.l0.color.foregroundDimmer],tipSectionCycles:[o.l0.py(8),o.l0.px(16),o.l0.borderRadius(4),o.l0.rowWithGap(2),o.l0.justify.center,o.l0.backgroundColor.backgroundDefault,o.l0.height(40),o.l0.align.center,(0,g.iv)({borderRadius:"40px",minWidth:70})],topTipperContainer:[o.l0.py(8),o.l0.pl(8),o.l0.pr(16),o.l0.borderRadius(4),o.l0.rowWithGap(2),o.l0.justify.spaceEvenly,o.l0.backgroundColor.backgroundDefault,(0,g.iv)({borderRadius:"100px",minWidth:80})]},V=function(e){var n,t,r,s=e.tipTarget,u=e.currentUser,c=(0,i.Z)((0,x.KO)(k),2),d=c[0],p=c[1],f=u&&u.id===s.owner.id;return(0,l.BX)(l.HY,{children:[(0,l.tZ)(o.G7,{css:[o.l0.colWithGap(8)],id:"tips",children:(0,l.BX)(o.G7,{css:L.tips,children:[f?null:(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(16)],children:[(0,l.tZ)(E,{currentUser:u,tipAmount:100,icon:"\ud83c\udf6c",tipTarget:s}),(0,l.tZ)(E,{currentUser:u,tipAmount:500,icon:"\ud83c\udf55",tipTarget:s}),(0,l.tZ)(E,{currentUser:u,tipAmount:1e3,icon:"\ud83c\udf2f",tipTarget:s})]}),(0,l.BX)(o.G7,{css:[o.l0.rowWithGap(24)],children:[(0,l.BX)(o.G7,{css:L.tipSection,children:[(0,l.tZ)(o.xv,{css:L.tipSectionTitle,children:"Total Tips"}),(0,l.BX)(o.G7,{css:L.tipSectionCycles,children:[(0,l.tZ)(a.Z,{css:[o.l0.mt(2)],size:16}),(0,l.tZ)(o.xv,{children:"".concat((0,w.d)(s.totalCyclesTips))})]})]}),(null===(n=s.topTippers)||void 0===n?void 0:n.length)>0&&null!==(null===(t=s.topTippers[0])||void 0===t?void 0:t.user)?(0,l.BX)(o.G7,{css:L.tipSection,children:[(0,l.BX)(o.xv,{css:L.tipSectionTitle,children:["Top Supporter",(null===(r=s.topTippers)||void 0===r?void 0:r.length)>1?"s":""]}),(0,l.tZ)(o.G7,{css:L.topTipperContainer,children:(0,l.tZ)(G,{tipTarget:s})})]}):null,s.currentUserTotalTips&&s.currentUserTotalTips>0?(0,l.BX)(o.G7,{css:L.tipSection,children:[(0,l.tZ)(o.xv,{css:L.tipSectionTitle,children:"You tipped"}),(0,l.BX)(o.G7,{css:L.tipSectionCycles,children:[(0,l.tZ)(a.Z,{css:[o.l0.mt(2)],size:16}),(0,l.tZ)(o.xv,{children:"".concat((0,w.d)(s.currentUserTotalTips))})]})]}):null]})]})}),(0,l.tZ)(D.Z,{isOpen:"insufficientBalance"===d,context:"tipping_replView",onRequestClose:function(){p("ready")}})]})},A=function(e){var n,t,r,i=e.replId,o=(0,I.SI)({variables:{id:i}}),a=o.data,u=o.loading,c="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null,d="CurrentUser"===(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.__typename)?a.currentUser:null;if(!c||!N({replOwner:null===c||void 0===c?void 0:c.user,currentUser:d}))return null;if(!(null===c||void 0===c||null===(t=c.user)||void 0===t?void 0:t.id)||!(null===c||void 0===c||null===(r=c.user)||void 0===r?void 0:r.username))throw new Error("Expected repl id to be set");if(u)return(0,l.tZ)(s.Z,{});var p={id:c.id,slug:c.url,type:"repl",owner:c.user,totalCyclesTips:c.totalCyclesTips,topTippers:c.topTippers,currentUserTotalTips:c.currentUserTotalTips};return(0,l.tZ)(V,{tipTarget:p,currentUser:d})},X=function(e){var n,t=e.themeId,r=(0,I.ir)({variables:{input:{themeId:t}}}),i=r.data,o=r.loading,a="CustomTheme"===(null===i||void 0===i?void 0:i.customThemeById.__typename)?i.customThemeById:null,u="CurrentUser"===(null===i||void 0===i||null===(n=i.currentUser)||void 0===n?void 0:n.__typename)?i.currentUser:null;if(!a||!N({replOwner:null===a||void 0===a?void 0:a.author,currentUser:u}))return null;if(o)return(0,l.tZ)(s.Z,{});var c={id:a.id,slug:a.slug,type:"theme",owner:a.author,totalCyclesTips:a.totalCyclesTips,topTippers:a.topTippers,currentUserTotalTips:a.currentUserTotalTips};return(0,l.tZ)(V,{tipTarget:c,currentUser:u})};function O(e){if("replId"in e)return(0,l.tZ)(A,{replId:e.replId});if("themeId"in e)return(0,l.tZ)(X,{themeId:e.themeId});throw new Error("Tips component requires a tippable target.")}},54595:function(e,n,t){t.d(n,{h1:function(){return c},pT:function(){return u}});var r=t(7297),i=t(31230);function l(){var e=(0,r.Z)(["\n  fragment TopTippersFragment on TipperUser {\n    user {\n      id\n      username\n      url\n      image\n    }\n    totalCyclesTipped\n  }\n"]);return l=function(){return e},e}function o(){var e=(0,r.Z)(["\n  fragment TopTipperReplLeaderboard on Repl {\n    id\n    topTippers {\n      ...TopTippersFragment\n    }\n  }\n  ","\n"]);return o=function(){return e},e}function a(){var e=(0,r.Z)(["\n  fragment TopTipperThemeLeaderboard on CustomTheme {\n    id\n    topTippers {\n      ...TopTippersFragment\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var s=(0,i.Ps)(l()),u=(0,i.Ps)(o(),s),c=(0,i.Ps)(a(),s)},38388:function(e,n,t){t.d(n,{M:function(){return l}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment PostsFeedNavTag on Tag {\n    id\n    isOfficial\n  }\n"]);return i=function(){return e},e}var l=(0,t(31230).Ps)(i())},64405:function(e,n,t){t.d(n,{b:function(){return a}});var r=t(7297),i=t(31230),l=t(16092);function o(){var e=(0,r.Z)(["\n  fragment ReplPostRecentCommentUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},47174:function(e,n,t){t.d(n,{n:function(){return c}});var r=t(7297),i=t(31230),l=t(17674),o=t(35055),a=t(21767),s=t(38388);function u(){var e=(0,r.Z)(["\n  fragment ReplPostReplCardRepl on Repl {\n    id\n    iconUrl\n    description(plainText: true)\n    ...ReplPostReplInfoRepl\n    ...ReplStatsRepl\n    ...ReplLinkRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n    owner {\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var c=(0,i.Ps)(u(),l.Zs,o.T,a.Y,s.M)},17674:function(e,n,t){t.d(n,{Gz:function(){return Z},U5:function(){return w},Zs:function(){return m},f_:function(){return g},rP:function(){return y}});var r=t(7297),i=t(31230),l=t(6565),o=t(58121),a=t(32399),s=t(35055),u=t(38388),c=t(64405);function d(){var e=(0,r.Z)(["\n  fragment ReplPostReplInfoRepl on Repl {\n    id\n    title\n    description(plainText: true)\n    imageUrl\n    iconUrl\n    templateInfo {\n      label\n      iconUrl\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,r.Z)(["\n  fragment ReplPostRepl on Repl {\n    id\n    ...ReplPostReplInfoRepl\n    ...LikeButtonRepl\n    ...ReplStatsRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,r.Z)(["\n  fragment ReplPostReplComment on ReplComment {\n    id\n    body\n    timeCreated\n    user {\n      id\n      ...ReplPostRecentCommentUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,r.Z)(["\n  fragment ReplPostPost on Post {\n    id\n    title\n    timeCreated\n    isPinned\n    isAnnouncement\n    ...ReplViewPostActionPermissions\n    replComment {\n      id\n      body(removeMarkdown: true)\n    }\n    repl {\n      id\n      ...ReplViewReplActionsPermissions\n      ...ReplPostRepl\n    }\n    user {\n      id\n      ...ReplPostUserPostUser\n    }\n    recentReplComments {\n      id\n      ...ReplPostReplComment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,r.Z)(["\n  fragment ReplPostCurrentUser on CurrentUser {\n    id\n    isModerator: hasRole(role: MODERATOR)\n    isAdmin: hasRole(role: ADMIN)\n    ...LikeButtonCurrentUser\n  }\n  ","\n"]);return v=function(){return e},e}var m=(0,i.Ps)(d()),g=(0,i.Ps)(p(),m,a.R7,s.T,u.M),Z=(0,i.Ps)(f(),c.b),w=(0,i.Ps)(h(),l.K4,l.jN,g,o.n,Z),y=(0,i.Ps)(v(),a.wO)},35055:function(e,n,t){t.d(n,{T:function(){return l}});var r=t(7297);function i(){var e=(0,r.Z)(["\n  fragment ReplStatsRepl on Repl {\n    id\n    likeCount\n    runCount\n    commentCount\n  }\n"]);return i=function(){return e},e}var l=(0,t(31230).Ps)(i())},58121:function(e,n,t){t.d(n,{n:function(){return a}});var r=t(7297),i=t(31230),l=t(16092);function o(){var e=(0,r.Z)(["\n  fragment ReplPostUserPostUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},49197:function(e,n,t){t.d(n,{G:function(){return y},Z:function(){return b}});var r=t(26042),i=t(69396),l=t(10253),o=t(35944),a=(t(67294),t(70917)),s=t(32399),u=t(69346),c=t(27843),d=t(81255),p=t(60977),f=t(44044),h=t(29163),v=t(15085),m=t(93160),g=t(81456),Z=t(1144),w=t(49412),y=(0,a.iv)([f.gU.filled,d.l0.p(8),{width:"auto",height:"auto"}]);function b(e){var n=e.repl,t=e.currentUser,a=e.surface,f=void 0===a||a,b=(0,l.Z)((0,s.lU)(),2),T=b[0],R=b[1].loading,x=(0,o.BX)(o.HY,{children:[(null===t||void 0===t?void 0:t.isVerified)&&(0,o.tZ)(v.zx,{css:[f&&y],disabled:R,onClick:function(){n.currentUserDidLike||(0,p.j)(p.U3.REACTED_TO_REPL,{replView:"https://replit.com"+n.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:n.wasPosted,isAppPublish:n.wasPublished}),T({variables:{input:{replId:n.id}},optimisticResponse:{toggleReplLike:(0,i.Z)((0,r.Z)({},n),{likeCount:Math.max(0,n.likeCount+(n.currentUserDidLike?-1:1)),currentUserDidLike:!n.currentUserDidLike})}})},iconLeft:n.currentUserDidLike?(0,o.tZ)(w.Z,{}):(0,o.tZ)(c.Z,{}),text:n.likeCount>0?(0,g.d)(n.likeCount):"Like"}),t&&!t.isVerified&&(0,o.BX)(u.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.Z,{alt:"Verify your email to like",css:f&&y,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(Z.x,{color:"dimmer",children:(0,g.d)(n.likeCount)})]}),!t&&(0,o.BX)(u.Z,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.Z,{alt:"Log in to like",css:f&&y,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(Z.x,{color:"dimmer",children:(0,g.d)(n.likeCount)})]})]});return f?(0,o.tZ)(m.Z,{background:"default",css:[d.l0.borderRadius(8)],children:x}):(0,o.tZ)(u.Z,{children:x})}},48293:function(e,n,t){t.d(n,{cu:function(){return f},rv:function(){return d}});var r=t(26042),i=t(7297),l=t(31230),o=t(6565),a=t(50319);function s(){var e=(0,i.Z)(["\n  fragment ReplViewReplTitleRepl on Repl {\n    id\n    title\n    iconUrl\n    templateInfo {\n      iconUrl\n    }\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    ...ReplViewReplActionsPermissions\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation ReplViewReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplViewReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var c={},d=(0,l.Ps)(s(),o.jN),p=(0,l.Ps)(u(),d);function f(e){var n=(0,r.Z)({},c,e);return a.D(p,n)}},76876:function(e,n,t){t.d(n,{Q:function(){return d},r:function(){return p}});var r=t(7297),i=t(31230),l=t(29359),o=t(90610),a=t(32399),s=t(9523);function u(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerRepl on Repl {\n    id\n    publishedAs\n    runCount\n    publicForkCount\n    releasesForkCount\n    prodUrl: hostedUrl(dotty: true)\n    isProject\n    nextPagePathname\n    lang {\n      id\n      header\n      displayName\n    }\n    ...ReplViewerOutputOverlayRepl\n    ...UseReplViewerRepl\n    ...LikeButtonRepl\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerCurrentUser on CurrentUser {\n    id\n    ...LikeButtonCurrentUser\n    ...CrosisContextCurrentUser\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}var d=(0,i.Ps)(u(),l.sI,o.gh,a.R7),p=(0,i.Ps)(c(),a.wO,s.D)},24228:function(e,n,t){t.d(n,{Z:function(){return hn}});var r=t(14924),i=t(26042),l=t(10253),o=t(35944),a=t(67294),s=t(90317),u=t(93160),c=t(81255),d=t(69346),p=t(61756),f=t(51995),h=t(1144),v=t(41307),m=t(73515),g=t(90610),Z=t(25602),w=t(18962),y=t(48920),b=t(45528),T=t(47568),R=t(70655),x=t(92876),k=t(11163),C=t.n(k),U=t(87194),P=t(75240),S=t(52867),E=t(64926),I=t(75192),F=t(39791),B=t(59916),_=t(25108);var G=t(60977),D=t(37452),N=t(65456),L=".lesson/lessonplan.md";function V(e){var n=e.fs,t=e.container,r=e.dotReplit,i=e.skip,o=e.preferredFile,s=(0,l.Z)(a.useState(null),2),u=s[0],c=s[1],d=function(e){var n,t=(0,l.Z)(a.useState(null===(n=e.getContext())||void 0===n?void 0:n.repl.id),2),r=t[0],i=t[1];return a.useEffect((function(){return e.onConnectionStateChanged((function(n){var t;n===P.e.CONNECTING&&i(null===(t=e.getContext())||void 0===t?void 0:t.repl.id)}))}),[e]),r}(t);return a.useEffect((function(){if(!i&&d){var e=!1;return Promise.all([(0,D.W)({replId:d,dotReplit:r,fs:n}),"LessonPlan"===(null===o||void 0===o?void 0:o.type)?n.stat(L):null,"FilePath"===(null===o||void 0===o?void 0:o.type)?n.stat(o.path):null]).then((function(n){var t=(0,l.Z)(n,3),r=t[0],i=r.entrypoint,a=r.readmeFile,s=t[1],u=t[2];e||("LessonPlan"===(null===o||void 0===o?void 0:o.type)&&s&&s.exists&&s.type===N.Tv.File?c(L):"FilePath"===(null===o||void 0===o?void 0:o.type)&&u&&u.exists&&u.type===N.Tv.File?c(o.path):"Readme"===(null===o||void 0===o?void 0:o.type)&&a?c(a):i&&c(i))})),function(){e=!0}}}),[n,r,d,i,o]),u}var A,X=t(37806);function O(e){var n,t,r=e.currentUser,i=e.repl,o=e.initialViewMode,u=e.enableDeeplinks,c=(0,l.Z)((0,X.yF)(),2),d=c[0],p=c[1],f=(0,a.useState)(w.e.DISCONNECTED),h=f[0],v=f[1],m=(0,a.useState)(y.A.OFFLINE),k=m[0],D=m[1],N=(0,a.useState)((function(){return function(e){var n=e.setBsodSentryEventId,t=(0,P.Z)({onUnrecoverableError:function(e){if(e.message.toLowerCase().includes("repl not found"))C().push("/home","~/");else{_.error(e),x.Tb(e);var t=(0,I.Qw)(e,{tags:{replviewer:"true"}});n(t)}}}),r=(0,U.Z)({container:t}),i=(0,B.Z)({container:t,fs:r}),l=(0,E.Z)({container:t,dotReplit:i}),o=(0,S.Z)({container:t,mode:"shellrunner",beforeRun:(0,T.Z)((function(){return(0,R.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,F.Z)(t,i)];case 1:return e.sent()?[4,l.installPackages()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))});return{container:t,fs:r,runner:o,dotReplit:i,packager:l}}({setBsodSentryEventId:function(e){return p(e)}})})),L=N[0],O=L.container,j=L.fs,W=L.dotReplit,z=L.runner,M=L.packager,H=(0,a.useRef)((0,Z.u9)()),q=(null===(n=i.replViewSettings)||void 0===n?void 0:n.defaultView)===s.dZ.ReplFile&&i.replViewSettings.replFile?i.replViewSettings.replFile:void 0,$={type:"Readme"};i.isProject?$={type:"LessonPlan"}:q&&($={type:"FilePath",path:q});var Y=(null===(t=i.replViewSettings)||void 0===t?void 0:t.defaultView)!==s.dZ.ReplImage&&(i.publishedAs===s.O2.Template||i.isProject),K=(0,a.useState)((function(){return o===A.Code||H.current||q||Y?{type:"code",fs:j,container:O,dotReplit:W}:null})),Q=K[0],J=K[1],ee=(0,a.useState)(H.current),ne=ee[0],te=ee[1],re=(0,l.Z)(a.useState(null),2),ie=re[0],le=re[1],oe=Boolean("code"===(null===Q||void 0===Q?void 0:Q.type)&&!Q.deeplink&&!H.current),ae=V({fs:j,dotReplit:W,container:O,preferredFile:$,skip:!oe});!function(e){var n=e.currentDeeplink,t=e.onChange,r=e.fs,i=e.enabled,l=(0,a.useRef)(!1),o=(0,a.useCallback)((0,T.Z)((function(){var e,n,i,o;return(0,R.__generator)(this,(function(a){switch(a.label){case 0:return l.current?[2]:[4,(0,Z.mv)(r)];case 1:return e=a.sent(),n=e.path,i=e.line,o=e.col,n?(t({path:n,line:i,col:o}),[2]):(t(null),[2])}}))})),[r,t]),s=(0,a.useState)(!1),u=s[0],c=s[1];(0,a.useEffect)((function(){u||o().then((function(){return c(!0)}))})),(0,a.useEffect)((function(){if(i)return window.addEventListener("hashchange",o),function(){window.removeEventListener("hashchange",o)}}),[i,o]),(0,a.useEffect)((function(){if(i&&n){var e=(0,Z.YM)(n),t=C().asPath;try{t=window.decodeURI(t)}catch(o){}if(!t.endsWith(e)){var r=C().asPath.includes("#")?C().asPath.slice(0,C().asPath.indexOf("#")):C().asPath;l.current=!0,C().push({pathname:C().pathname,query:C().query},"".concat(r).concat(e),{shallow:!0}),l.current=!1}}}),[r,n,i])}({fs:j,currentDeeplink:"code"===(null===Q||void 0===Q?void 0:Q.type)?Q.deeplink:void 0,onChange:function(e){J(e?{deeplink:e,type:"code",container:O,fs:j,dotReplit:W}:null)},enabled:u});var se=(0,l.Z)((0,g.yo)({variables:{replId:i.id}}),1)[0];(0,a.useEffect)((function(){if((0,Z.u9)()){var e=!1;return(0,Z.mv)(j).then((function(n){var t=n.path,r=n.line,i=n.col;e||t&&J({type:"code",container:O,fs:j,dotReplit:W,deeplink:{path:t,line:r,col:i}})})),function(){e=!0}}}),[O,j,W]),(0,a.useEffect)((function(){oe&&ae&&J({type:"code",container:O,fs:j,dotReplit:W,deeplink:{path:ae}})}),[oe,ae,O,j,W]),(0,a.useEffect)((function(){ie&&J("server"!==ie?{type:"vnc",container:O,fs:j}:{type:"server",previewUrl:i.previewUrl})}),[O,j,ie,i.previewUrl]),(0,a.useEffect)((function(){h!==w.e.CONNECTED&&le(null)}),[h]);var ue=(0,b.b)({repl:i,currentUser:r}),ce=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(i),de=ne||Boolean(Q&&("code"===Q.type||"vnc"===Q.type||"terminal"===Q.type));(0,a.useEffect)((function(){if(de&&O.getConnectionState()===w.e.DISCONNECTED){O.connect({context:ue});var e=ce?[O.close]:[z.onStateChanged(D),O.onConnectionStateChanged(v),O.onPortOpened((function(e){var n=e.isVnc;le(n?"vnc":"server")})),O.close];return function(){e.forEach((function(e){return e()}))}}}),[de,O,z,ue,ce]);var pe=(0,a.useRef)(!1);return(0,a.useEffect)((function(){k===y.A.IDLE&&pe.current&&(pe.current=!1,"terminal"===(null===Q||void 0===Q?void 0:Q.type)&&z.run())}),[k,Q,z]),{fs:j,openFile:function(e){"server"===(null===Q||void 0===Q?void 0:Q.type)&&D(y.A.IDLE),J({type:"code",container:O,fs:j,deeplink:{path:e},dotReplit:W}),z.getRunState()===y.A.RUNNING&&z.stopRun()},viewState:Q,runRepl:function(){if(te(!1),r&&se(),(0,G.j)(G.U3.REACTED_TO_REPL,{replView:"https://replit.com"+i.url,reaction:"repl_ran",isReplTalk:!1,item:"repl",isCommunityPublish:i.wasPosted,isAppPublish:i.wasPublished}),ce){var e,n,t=(null===(e=i.deployment)||void 0===e||null===(n=e.activeRelease)||void 0===n?void 0:n.previewUrl)||i.previewUrl;return J({type:"server",previewUrl:t}),void D(y.A.RUNNING)}if(i.lang.canUseShellRunner)return J("server"===ie?{type:"server",previewUrl:i.previewUrl}:"vnc"===ie?{type:"vnc",container:O,fs:j}:{type:"terminal",runner:z,packager:M}),z.getRunState()!==y.A.IDLE?void(pe.current=!0):void z.run();J({type:"deprecationNotice"})},stopRepl:function(){J(null),te(!1),D(y.A.IDLE),ce||z.getRunState()===y.A.RUNNING&&z.stopRun()},runState:k,isFileTreeOpen:ne,setIsFileTreeOpen:te,bsodId:d,showUrlOutput:ce,devClearBsod:function(){p(null)}}}!function(e){e.Code="Code",e.Output="Output"}(A||(A={}));var j=t(24337),W=t(87603),z=t.n(W),M=t(48551),H=t(63872),q=t(58794),$=t(57263),Y=$.j.tabletMin,K=t(5152),Q=t.n(K),J=t(85861),ee=function(){var e=(0,T.Z)((function(){return(0,R.__generator)(this,(function(e){return[2,Promise.all([t.e(2738),t.e(7864)]).then(t.t.bind(t,74474,23)).then((function(e){return e.default}))]}))}));return function(){return e.apply(this,arguments)}}(),ne=Q()(ee,{ssr:!1,loading:function(){return null}});function te(e){var n=e.contents,t={scrollToContent:!0};try{t=(0,i.Z)({},t,JSON.parse(n||"{}"))}catch(l){}var r=(0,J.Fg)().isDarkColorScheme;return(0,o.BX)("div",{className:"jsx-f04e2237e6284377 excalidraw-wrapper",children:[(0,o.tZ)(ne,{viewModeEnabled:!0,zenModeEnabled:!0,initialData:t,theme:r?"dark":"light"}),(0,o.tZ)(z(),{id:"f04e2237e6284377",children:".excalidraw-wrapper.jsx-f04e2237e6284377{cursor:all-scroll;height:100%;width:100%}"})]})}var re=t(34837),ie=t.n(re),le=t(28497);function oe(e){var n=e.contents,t=e.isKbmsprite,r=a.useRef(null);return a.useEffect((function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var i=JSON.parse(n),l=ie()({canvas:e,data:t?(0,le.C)(i):i,readonly:!0});return function(){l.cleanUp()}}}),[n,t]),(0,o.tZ)("canvas",{ref:r,className:"jsx-93826966b3fae22 pedit",children:(0,o.tZ)(z(),{id:"93826966b3fae22",children:".pedit.jsx-93826966b3fae22{width:100%;height:100%}"})})}var ae=t(54568),se=t(68928),ue=t(78244),ce=t(77402),de=t(66681);function pe(e){var n=e.fs,t=e.deeplink,r=null===t||void 0===t?void 0:t.path,i=(0,ae.Z)({fs:n,path:r});return(0,o.BX)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" file-viewer",children:[(0,o.BX)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" content",children:[i.result&&i.result.fileViewerType===ce.D.Media?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" media",children:(0,o.tZ)(H.A,{content:q.Z.from(i.result.content).toString("base64"),mime:(0,M.yC)(i.result.path)})}):null,i.isLoading&&i.fileViewerType===ce.D.Media?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===ce.D.Markdown?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" markdown",children:(0,o.tZ)(de.Z,{path:i.result.path,source:i.result.content.toString(),fs:n,sourcePos:!1})}):null,i.isLoading&&i.fileViewerType===ce.D.Markdown?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===ce.D.Draw?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" draw",children:(0,o.tZ)(te,{contents:i.result.content.toString()})}):null,i.isLoading&&i.fileViewerType===ce.D.Draw?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===ce.D.Code?(0,o.tZ)(ue.ZP,{filePath:i.result.path,code:i.result.content.toString(),fontSize:14}):null,i.isLoading&&i.fileViewerType===ce.D.Code?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" file-loader",children:(0,o.tZ)(se.Z,{})}):null,i.result&&i.result.fileViewerType===ce.D.Pedit?(0,o.tZ)(oe,{contents:i.result.content.toString(),isKbmsprite:!!(null===r||void 0===r?void 0:r.endsWith(".kbmsprite"))}):null,!i.isLoading&&i.error?(0,o.tZ)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]])+" error",children:(0,o.BX)("div",{className:z().dynamic([["bfde0a756867257d",[Y]]]),children:["Could not load ",i.error.path]})}):null]}),(0,o.tZ)(z(),{id:"bfde0a756867257d",dynamic:[Y],children:".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%}.markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%}.draw.__jsx-style-dynamic-selector{height:100%;width:100%}.file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:auto;display:none}.content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative}.file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--space-8);padding-left:var(--space-8);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn ease 0s forwards;-moz-animation:fadeIn ease 0s forwards;-o-animation:fadeIn ease 0s forwards;animation:fadeIn ease 0s forwards;-webkit-animation-delay:200ms;-moz-animation-delay:200ms;-o-animation-delay:200ms;animation-delay:200ms}.media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@media screen and (min-width:".concat(Y,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px}}")})]})}var fe=t(65967),he=t(61622),ve=t(81456),me=t(31066),ge=t(6292),Ze=t(92098),we=t(70917),ye=t(46609),be=t(38935),Te=t(12365),Re=t(83043),xe=t(69183),ke=t(84810),Ce=t(15519);function Ue(e){return(0,o.tZ)(Te.D,{children:(0,o.tZ)(Pe,(0,i.Z)({},e))})}function Pe(e){var n=e.activePath,t=e.fs,r=e.language,i=e.onNodeClick;(0,Re.Yc)({fs:t});var s=(0,l.Z)(a.useState(!1),2),u=s[0],p=s[1],f=function(e){var n=e.language,t=e.areHiddenFilesVisible;return a.useCallback((function(e){return!!(0,xe.MF)(e)||!t&&((0,xe.uC)(e)||(0,ke.C)(e)||(0,xe.yb)(e,n))}),[n,t])}({language:r,areHiddenFilesVisible:u}),v=Ce.Z.getMainFileName(r),m=a.useCallback((function(e,n){return(0,M.x$)(e,n,v)}),[v]);return(0,Te.S)({flags:{flagFiletreeMultiselect:!1},readOnly:!0,activeFile:n,openFile:function(e){return i({path:e,type:N.Tv.File})},shouldHideFile:f,sortNode:m,onError:function(){},onAction:function(){}}),(0,o.tZ)(ye.i.Provider,{value:{fs:t,uploadFiles:function(){},pendingUploads:[],duplicateFile:(0,T.Z)((function(){return(0,R.__generator)(this,(function(e){return[2]}))}))},children:(0,o.tZ)(Ze.Z,{children:(0,o.BX)(d.Z,{css:[c.l0.flex.column,c.l0.p(8),(0,we.iv)({overflow:"auto",height:"100%"})],children:[(0,o.BX)(d.Z,{css:[c.l0.rowWithGap(4),c.l0.p(8),c.l0.justify.spaceBetween],children:[(0,o.tZ)(h.h,{level:3,variant:"subheadDefault",children:"Files"}),(0,o.tZ)(be.ZP,{actions:[u?be.st.HideHiddenFiles:be.st.ShowHiddenFiles],onAction:function(e){switch(e){case be.st.ShowHiddenFiles:return void p(!0);case be.st.HideHiddenFiles:p(!1)}}})]}),(0,o.tZ)(ge.Z,{siblings:[],readOnly:!0,path:me.Ql})]})})})}var Se=t(46702),Ee=t(96189),Ie=t(49197),Fe=t(26451),Be=t(29163),_e=t(35621),Ge=t(89295),De=t(94860),Ne=t(93058);function Le(){return Boolean(function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullscreenElement}())}var Ve=t(62794),Ae=t(10164),Xe=t(83241),Oe=t(21131),je=t(44044),We=t(15085),ze=t(7297),Me=t(31230),He=t(92600),qe=t(37887);function $e(){var e=(0,ze.Z)(["\n  query TotalTipsRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        user {\n          ... on User {\n            id\n            username\n            ...IsTippingAvailableForRecipient\n          }\n        }\n        totalCyclesTips\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n"]);return $e=function(){return e},e}var Ye={},Ke=(0,Me.Ps)($e(),He.R1,He.rd);var Qe=t(38164),Je=t(90024),en=t(85485);function nn(e){var n,t=e.repl,l=function(e){var n=(0,i.Z)({},Ye,e);return qe.a(Ke,n)}({variables:{id:t.id}}),a=l.data;if(l.loading)return null;var s="CurrentUser"===(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.__typename)?a.currentUser:null,d="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return(0,Je.L)({replOwner:null===d||void 0===d?void 0:d.user,currentUser:s})&&d?(0,o.tZ)(u.Z,{background:"default",css:[c.l0.borderRadius(8),(0,r.Z)({},(0,en.EM)("mobileMax"),[c.l0.visibility.hidden])],children:(0,o.tZ)(We.zx,{css:[je.gU.filled,c.l0.p(8),{width:"auto",height:"auto"}],onClick:function(){(0,G.j)(G.U3.TIP_USED,{action:"total-tips-button-clicked",repl:t.url,item:"repl"});var e=document.getElementById("tips");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},iconLeft:(0,o.tZ)(Qe.Z,{}),text:"".concat((0,ve.d)(d.totalCyclesTips||0)," tips")})}):null}var tn=t(23384),rn=t(15902),ln="1px solid "+c.TV.outlineDimmer;function on(e){var n=e.children;return(0,o.tZ)(d.Z,{tag:"header",css:[{borderBottom:ln},c.l0.p(8),c.l0.rowWithGap(8),c.l0.align.center],children:n})}var an=d.K.a;function sn(e){var n=e.runCount,t=e.runState,r=e.onClick,l=e.publishedAs,a=t===y.A.RUNNING?(0,o.tZ)(fe.Z,{fill:"currentColor"}):(0,o.tZ)(f.Z,{fill:"currentColor"}),u=l===s.O2.Template?"Run example":"Run";return t===y.A.RUNNING&&(u="Stop"),(0,o.tZ)(d.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:(0,o.tZ)(p.ZP,(0,i.Z)({colorway:t===y.A.RUNNING||l===s.O2.Template?void 0:"positive",onClick:r,iconLeft:a,text:u},n>0&&{secondaryText:(0,ve.d)(n)}))})}function un(e){var n=e.innerRef,t=e.children;return(0,o.tZ)(u.Z,{elevated:!0,css:[{border:ln},c.l0.borderRadius(8)],innerRef:n,children:t})}function cn(e){var n=e.src;return(0,o.tZ)(d.Z,{css:[c.l0.width("100%"),c.l0.height("100%")],children:(0,o.tZ)(d.Z,(0,i.Z)({tag:"iframe",src:n,css:[c.l0.width("100%"),c.l0.height("100%"),{borderBottomRightRadius:8,borderBottomLeftRadius:8,position:"absolute",backgroundColor:"white",display:"block",border:"none",top:0,left:0}]},Xe.Z))})}function dn(e){var n=e.fs,t=e.isOpen,r=e.language,i=e.activePath,l=e.onNodeClick;return(0,o.tZ)(d.Z,{css:[{zIndex:101,position:"absolute",top:0,left:0,height:"100%",overflow:"hidden",borderBottomLeftRadius:8},!t&&{pointerEvents:"none"}],children:(0,o.tZ)(u.Z,{elevated:!0,background:"root",css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(t?0:-200,"px)")}],children:(0,o.tZ)(Ue,{fs:n,language:r,activePath:i,onNodeClick:l})})})}var pn=d.K.div;function fn(e){var n=e.repl,t=e.currentUser,i=e.enableDeeplinks,s=e.isFromProfile,f=e.hideTotalTips,g=O({enableDeeplinks:Boolean(i),repl:n,currentUser:t}),Z=g.openFile,w=g.viewState,b=g.fs,T=g.runRepl,R=g.stopRepl,x=g.runState,C=g.bsodId,U=g.devClearBsod,P=g.isFileTreeOpen,S=g.setIsFileTreeOpen,E=g.showUrlOutput,I=a.useRef(null),F=(0,Ne.Z)().showError,B=(0,k.useRouter)(),_=(0,a.useState)(!1),D=_[0],L=_[1],V=function(){var e=(0,l.Z)(a.useState(Le()),2),n=e[0],t=e[1];return a.useEffect((function(){var e=function(){t(Le())};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),n}(),A=(0,Ee.Z)((function(e){void 0!==e.width&&L(e.width<=500)})),X="code"===(null===w||void 0===w?void 0:w.type)&&w.deeplink,W=(0,l.Z)(a.useState(X?X.path:null),2),z=W[0],M=W[1];(0,a.useEffect)((function(){M(X?X.path:null)}),[X,null===w||void 0===w?void 0:w.type]);var H=(0,tn.D)({controlName:"flag-tip-repl"}),q=!(0,rn.Vg)(B),Y=!f&&H&&!(0,rn.Vg)(B);return C?(0,o.tZ)(m.Z,{eventId:C,devHide:U}):(0,o.BX)(un,{innerRef:I,children:[(0,o.BX)(on,{children:[(0,o.BX)(d.Z,{css:[c.l0.flex.growAndShrink(1),c.l0.rowWithGap(8)],children:[(0,o.BX)(d.Z,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[(0,o.tZ)(p.ZP,{iconLeft:(0,o.tZ)(Fe.Z,{}),text:P?"Hide files":"Show files",onClick:function(){return S((function(e){return!e}))},css:(0,r.Z)({},"@media (max-width: ".concat($.j.mobileMax,"px)"),{display:"none"})}),(0,o.tZ)(u.Z,{background:"default",css:[c.l0.borderRadius(8),(0,r.Z)({},"@media (min-width: ".concat($.j.mobileMax+1,"px)"),{display:"none"})],children:(0,o.tZ)(Be.Z,{css:Ie.G,alt:P?"Hide files":"Show files",onClick:function(){return S((function(e){return!e}))},children:(0,o.tZ)(Fe.Z,{})})})]}),E||"server"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(d.Z,{css:[c.l0.center,{borderLeft:"1px solid "+c.TV.outlineDimmest}],children:(0,o.BX)(an,{css:[c.l0.rowWithGap(4),c.l0.color.foregroundDimmer,c.l0.px(8)],href:n.prodUrl,target:"_blank",children:[(0,o.tZ)(Se.Z,{}),(0,o.tZ)(h.x,{children:(0,o.tZ)("span",{css:(0,r.Z)({},"@media (max-width: ".concat($.j.mobileMax+20,"px)"),{display:"none"}),children:"Open website"})})]})}):null]}),(0,o.BX)(d.Z,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[I.current&&document.fullscreenEnabled?(0,o.tZ)(Be.Z,{alt:V?"Exit fullscreen":"Enter fullscreen",css:Ie.G,onClick:function(){var e=I.current;e?V?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozExitFullScreen?e.mozExitFullScreen():e.webkitExitFullScreen&&e.webkitExitFullScreen()}():(!function(e){var n=e;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen()}(e),(0,G.j)(G.U3.REPL_VIEWER_FULLSCREEN_ENTERED,{location:s?"profile":"coverpage"})):F("Failed to enter fullscreen mode")},children:V?(0,o.tZ)(De.Z,{}):(0,o.tZ)(Ge.Z,{})}):null,Y?(0,o.tZ)(nn,{repl:n}):null,q?(0,o.tZ)(Ie.Z,{repl:n,currentUser:t}):null,(0,o.tZ)(sn,{runCount:n.runCount,runState:x,publishedAs:n.publishedAs,onClick:function(){x!==y.A.IDLE&&x!==y.A.OFFLINE?x===y.A.RUNNING&&R():T()}})]})]}),(0,o.BX)(pn,{ref:function(e){A(e)},css:[c.l0.flex.growAndShrink(1),{position:"relative"}],children:[null===w?(0,o.tZ)(v.Z,{repl:n,onClick:T}):null,"server"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(cn,{src:w.previewUrl}):null,"vnc"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(j.Z,{fs:w.fs,container:w.container}):null,"deprecationNotice"===(null===w||void 0===w?void 0:w.type)?(0,o.BX)(d.Z,{css:[c.l0.center,c.l0.p(16),c.l0.height("100%")],children:[(0,o.BX)(h.x,{multiline:!0,variant:"subheadDefault",children:['Running "',n.lang.displayName,'" is no longer supported.'," "]}),(0,o.tZ)(Ve.Z,{feature:Ae.l.General})]}):null,"terminal"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(d.Z,{css:[c.l0.height("100%"),c.l0.width("100%"),c.l0.position.relative,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8}],children:(0,o.tZ)(he.Z,{packager:w.packager,runner:w.runner})}):null,"code"===(null===w||void 0===w?void 0:w.type)?(0,o.tZ)(d.Z,{css:[c.l0.height("100%"),c.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,transition:"margin ".concat(160,"ms"),marginLeft:P&&!D?200:0}],onClick:function(){D&&S(!1)},children:(0,o.tZ)(pe,{fs:w.fs,deeplink:w.deeplink})}):null,(0,o.tZ)(dn,{isOpen:P,language:n.lang.id,activePath:z,onNodeClick:function(e){e.type!==N.Tv.Directory&&(Z(e.path),D&&S(!1))},fs:b})]})]})}function hn(e){var n=e.repl,t=e.currentUser,r=e.enableDeeplinks,i=e.isFromProfile,l=e.hideTotalTips,s=(0,a.useState)(!1),u=s[0],c=s[1];(0,a.useEffect)((function(){return c(!0)}),[]);var d=(0,Oe.Z)((function(){return{id:n.id,language:n.language}}),[n.id,n.language]);return u?(0,o.tZ)(_e.Z.Provider,{value:d,children:(0,o.tZ)(fn,{isFromProfile:i,repl:n,currentUser:t,enableDeeplinks:r,hideTotalTips:l})}):(0,o.tZ)(un,{})}},54568:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(26042),i=t(10253),l=t(67294),o=t(77402);function a(e,n){return(0,r.Z)({},e,n)}var s={isLoading:!1,result:null,error:null,fileViewerType:null};function u(e){var n=e.fs,t=e.path,r=(0,i.Z)(l.useReducer(a,s),2),u=r[0],c=r[1];return l.useEffect((function(){if(t){var e=!1,r=(0,o.V)(t);return c({isLoading:!0,fileViewerType:r}),n.readFile(t).then((function(n){e||(n.error?c({isLoading:!1,result:null,error:{path:t,fileViewerType:r,error:n.error}}):c({isLoading:!1,result:{path:t,fileViewerType:r,content:n.content},error:null}))})),function(){e=!0}}c(s)}),[n,t]),u}},90610:function(e,n,t){t.d(n,{gh:function(){return d},yo:function(){return f}});var r=t(26042),i=t(7297),l=t(31230),o=t(9523),a=t(50319);function s(){var e=(0,i.Z)(["\n  fragment UseReplViewerRepl on Repl {\n    id\n    previewUrl: hostedUrl(dotty: false, dev: false)\n    url\n    wasPosted\n    wasPublished\n    publishedAs\n    isProject\n    lang {\n      id\n      canUseShellRunner\n    }\n    config {\n      isServer\n      isVnc\n    }\n    deployment {\n      id\n      activeRelease {\n        id\n        previewUrl: hostedUrl\n      }\n    }\n    replViewSettings {\n      id\n      defaultView\n      replFile\n    }\n    ...CrosisContextRepl\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation UserReplViewCreateReplRun($replId: String!) {\n    createReplRun(replId: $replId) {\n      ... on Repl {\n        id\n        runCount\n      }\n    }\n  }\n"]);return u=function(){return e},e}var c={},d=(0,l.Ps)(s(),o.C),p=(0,l.Ps)(u());function f(e){var n=(0,r.Z)({},c,e);return a.D(p,n)}},28497:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()}))}}function i(e){return new Promise((function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t}))}function l(e){return new Promise((function(n,t){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var l=i.getContext("2d");if(l){var o=r.map((function(n){return l.drawImage(n,0,0),{pixels:Array.from(l.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));n({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else t(new Error("failed to get canvas ctx"))})).catch(t)}))}t.d(n,{C:function(){return r},u:function(){return l}})}}]);
//# sourceMappingURL=3149-164f332c23bf70b3.js.map